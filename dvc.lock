schema: '2.0'
stages:
  date_ingestion:
    cmd: python src/cnn_classifier/pipeline/Stage01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: fd38364918385458383c2ba9009f78bb
      size: 867
    - path: src/cnn_classifier/pipeline/Stage01_data_ingestion.py
      hash: md5
      md5: 9808f6735ea8d14ed06d64290c33c9e1
      size: 952
    outs:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: c0669814c37b9318a90c9259a3ef44d9.dir
      size: 80853194
      nfiles: 543
  prepare_base_model:
    cmd: python src/cnn_classifier/pipeline/Stage02_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: fd38364918385458383c2ba9009f78bb
      size: 867
    - path: params.yaml
      hash: md5
      md5: 2bce39d54c4a51ae6856e0be7a273786
      size: 363
    - path: src/cnn_classifier/pipeline/Stage02_prepare_base_model.py
      hash: md5
      md5: 2809abd5dfc92118648fdf2b055a3995
      size: 1020
    params:
      params.yaml:
        CLASSES: 2
        INCLUDE_TOP: false
        INPUT_SHAPE:
        - 224
        - 224
        - 3
        LEARNING_RATE: 0.01
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 05c24351036fa92f9f705ebb7d7ecaac.dir
      size: 118077274
      nfiles: 2
  training:
    cmd: python src/cnn_classifier/pipeline/Stage03_model_trainer.py
    deps:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: c0669814c37b9318a90c9259a3ef44d9.dir
      size: 80853194
      nfiles: 543
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 05c24351036fa92f9f705ebb7d7ecaac.dir
      size: 118077274
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: fd38364918385458383c2ba9009f78bb
      size: 867
    - path: params.yaml
      hash: md5
      md5: 2bce39d54c4a51ae6856e0be7a273786
      size: 363
    - path: src/cnn_classifier/pipeline/Stage03_model_trainer.py
      hash: md5
      md5: d1593b8cbb92d1c0cdfce747d4aea171
      size: 938
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 16
        CLASSES: 2
        EPOCHS: 2
        INCLUDE_TOP: false
        INPUT_SHAPE:
        - 224
        - 224
        - 3
        LEARNING_RATE: 0.01
        WEIGHTS: imagenet
    outs:
    - path: trained_model/training/trained_model.keras
      hash: md5
      md5: 453e168bf6c7fd7c2a2fd4ead949c7ab
      size: 59569915
  evaluation:
    cmd: python src/cnn_classifier/pipeline/Stage04_model_evaluation_mlflow.py
    deps:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: c0669814c37b9318a90c9259a3ef44d9.dir
      size: 80853194
      nfiles: 543
    - path: config/config.yaml
      hash: md5
      md5: fd38364918385458383c2ba9009f78bb
      size: 867
    - path: params.yaml
      hash: md5
      md5: 2bce39d54c4a51ae6856e0be7a273786
      size: 363
    - path: src/cnn_classifier/pipeline/Stage04_model_evaluation_mlflow.py
      hash: md5
      md5: d9b0771d5b6b88076fb46bc269f86af7
      size: 1180
    - path: trained_model/training/trained_model.keras
      hash: md5
      md5: 453e168bf6c7fd7c2a2fd4ead949c7ab
      size: 59569915
    params:
      params.yaml:
        BATCH_SIZE: 16
        INPUT_SHAPE:
        - 224
        - 224
        - 3
    outs:
    - path: ModelEvaluation_scores.json
      hash: md5
      md5: b5dc8fd03df36d8a14a2b4ece1badfb2
      size: 73
