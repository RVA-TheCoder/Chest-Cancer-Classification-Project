schema: '2.0'
stages:
  date_ingestion:
    cmd: python src/cnn_classifier/pipeline/Stage01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: ae56efbea6b36f154afff08e6df18068
      size: 735
    - path: src/cnn_classifier/pipeline/Stage01_data_ingestion.py
      hash: md5
      md5: 9808f6735ea8d14ed06d64290c33c9e1
      size: 952
    outs:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: c0669814c37b9318a90c9259a3ef44d9.dir
      size: 80853194
      nfiles: 543
  prepare_base_model:
    cmd: python src/cnn_classifier/pipeline/Stage02_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: ae56efbea6b36f154afff08e6df18068
      size: 735
    - path: params.yaml
      hash: md5
      md5: b3621067ca3d912c2aea28316e27287d
      size: 364
    - path: src/cnn_classifier/pipeline/Stage02_prepare_base_model.py
      hash: md5
      md5: 2809abd5dfc92118648fdf2b055a3995
      size: 1020
    params:
      params.yaml:
        CLASSES: 2
        INCLUDE_TOP: false
        INPUT_SHAPE:
        - 224
        - 224
        - 3
        LEARNING_RATE: 0.01
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 94e35e77798016741f8192c47fe86f4b.dir
      size: 118077223
      nfiles: 2
  training:
    cmd: python src/cnn_classifier/pipeline/Stage03_model_trainer.py
    deps:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: c0669814c37b9318a90c9259a3ef44d9.dir
      size: 80853194
      nfiles: 543
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 94e35e77798016741f8192c47fe86f4b.dir
      size: 118077223
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: ae56efbea6b36f154afff08e6df18068
      size: 735
    - path: params.yaml
      hash: md5
      md5: b3621067ca3d912c2aea28316e27287d
      size: 364
    - path: src/cnn_classifier/pipeline/Stage03_model_trainer.py
      hash: md5
      md5: d1593b8cbb92d1c0cdfce747d4aea171
      size: 938
    params:
      params.yaml:
        AUGMENTATION: false
        BATCH_SIZE: 16
        CLASSES: 2
        EPOCHS: 1
        INCLUDE_TOP: false
        INPUT_SHAPE:
        - 224
        - 224
        - 3
        LEARNING_RATE: 0.01
        WEIGHTS: imagenet
    outs:
    - path: trained_model/training/trained_model.keras
      hash: md5
      md5: 120ccd99e741c180d98e65c47c8bb4f6
      size: 59551328
  evaluation:
    cmd: python src/cnn_classifier/pipeline/Stage04_model_evaluation_mlflow.py
    deps:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: c0669814c37b9318a90c9259a3ef44d9.dir
      size: 80853194
      nfiles: 543
    - path: config/config.yaml
      hash: md5
      md5: ae56efbea6b36f154afff08e6df18068
      size: 735
    - path: params.yaml
      hash: md5
      md5: b3621067ca3d912c2aea28316e27287d
      size: 364
    - path: src/cnn_classifier/pipeline/Stage04_model_evaluation_mlflow.py
      hash: md5
      md5: 5bcdef90d3945c836fd32c0ca6913197
      size: 1180
    - path: trained_model/training/trained_model.keras
      hash: md5
      md5: 120ccd99e741c180d98e65c47c8bb4f6
      size: 59551328
    params:
      params.yaml:
        BATCH_SIZE: 16
        INPUT_SHAPE:
        - 224
        - 224
        - 3
    outs:
    - path: ModelEvaluation_scores.json
      hash: md5
      md5: 8b9470276a649a750cab196056cfdb16
      size: 73
